{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 44b86bc41690e67fc6a0","webpack:///./src/cropduster.js"],"names":["DEPRECATION_MSG","CD","CORS_PROXY_SERVER","$","selector","doc","document","Array","prototype","slice","call","querySelectorAll","_initParams","_urlParams","search","query","_searchString","match","exec","decodeURIComponent","param","name","params","window","location","substring","autofill","key","length","getElementById","innerHTML","throwError","msg","MICapture","log","error","cancelRequest","cancel","setImageRedirect","imageUrl","a","createElement","href","id","style","display","body","appendChild","setClickthrough","url","setExtraData","dataObject","el","existingData","JSON","parse","getAttribute","_","hasOwnProperty","setAttribute","stringify","proxyUrl","port","protocol","hostname","pathname","hash","_readyToCapture","_reset","pause","maxSuspension","setTimeout","resume","getCORS","options","callback","corsCacheTime","test","headers","_hashForRequest","get","deprecatedCallback","arguments","Promise","resolve","reject","req","XMLHttpRequest","onerror","status","statusText","onload","contentType","getResponseHeader","data","responseText","open","method","withCredentials","header","setRequestHeader","send","message","getImage","img","Image","event","src","getImages","urls","afterEach","afterAll","promises","map","then","all","images","Error","waitForAsset","assetUrl","console","str","i","charCodeAt","toString"],"mappings":"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","file":"cropduster.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cropduster\"] = factory();\n\telse\n\t\troot[\"cropduster\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 44b86bc41690e67fc6a0","const DEPRECATION_MSG = 'callbacks are deprecated in cropduster, prefer using promises for asynchronous operations';\n\nconst CD = {\n  CORS_PROXY_SERVER: 'http://cors.movableink.com',\n\n  $(selector, doc) {\n    if (!doc) {\n      doc = document;\n    }\n    return Array.prototype.slice.call(doc.querySelectorAll(selector));\n  },\n\n  _initParams() {\n    CD._urlParams = {};\n    const search = /([^&=]+)=?([^&]*)/g;\n    const query = CD._searchString();\n\n    let match = search.exec(query);\n    while (match) {\n      CD._urlParams[decodeURIComponent(match[1])] = decodeURIComponent(match[2]);\n      match = search.exec(query);\n    }\n  },\n\n  param(name) {\n    return CD.params()[name];\n  },\n\n  params(name) {\n    let params = CD._urlParams;\n    if (typeof params === 'undefined') {\n      CD._initParams();\n      params = CD._urlParams;\n    }\n\n    if (name) {\n      return params[name];\n    } else {\n      return params;\n    }\n  },\n\n  _searchString() {\n    return window.location.search.substring(1);\n  },\n\n  autofill() {\n    CD.param('init'); // inits CD._urlParams\n    const params = CD._urlParams;\n    for (const key in params) {\n      if (params[key] !== 'undefined' && params[key].length > 0) {\n        if (document.getElementById(`autofill_${key}`)) {\n          document.getElementById(`autofill_${key}`).innerHTML = params[key];\n        }\n      }\n    }\n  },\n\n  throwError(msg) {\n    if (typeof MICapture === 'undefined') {\n      CD.log('Capturama error: ' + msg);\n    } else {\n      MICapture.error(msg);\n    }\n  },\n\n  cancelRequest(msg) {\n    if (typeof MICapture === 'undefined') {\n      CD.log(`Request canceled: ${msg}`);\n    } else {\n      MICapture.cancel(msg);\n    }\n  },\n\n  setImageRedirect(imageUrl) {\n    const a = document.getElementById('mi-redirect-image') || document.createElement('a');\n\n    a.href = imageUrl;\n    a.id = 'mi-redirect-image';\n    a.style.display = 'none';\n\n    document.body.appendChild(a);\n\n    return a;\n  },\n\n  setClickthrough(url) {\n    const a = document.getElementById('mi_dynamic_link') || document.createElement('a');\n\n    a.href = url;\n    a.id = 'mi_dynamic_link';\n    a.style.display = 'none';\n\n    document.body.appendChild(a);\n\n    return a;\n  },\n\n  setExtraData(dataObject) {\n    const el = document.getElementById('mi-data') || document.createElement('div');\n\n    el.id = 'mi-data';\n    el.style.display = 'none';\n\n    let existingData;\n    try {\n      existingData = JSON.parse(el.getAttribute('data-mi-data')) || {};\n    } catch (_) {\n      // Overwrite if there was something in mi-data that wasn't JSON\n      existingData = {};\n    }\n\n    for (const key in dataObject) {\n      if (dataObject.hasOwnProperty(key)) {\n        existingData[key] = dataObject[key];\n      }\n    }\n\n    el.setAttribute('data-mi-data', JSON.stringify(existingData));\n    document.body.appendChild(el);\n\n    return el;\n  },\n\n  proxyUrl(url) {\n    const a = document.createElement('a');\n    a.href = url;\n\n    let port = '';\n    if (a.port === '0' || a.port === '') {\n      port = a.protocol === 'https:' ? ':443' : '';\n    } else {\n      port = `:${a.port}`;\n    }\n\n    const { hostname, pathname, search, hash } = a;\n    return `${CD.CORS_PROXY_SERVER}/${hostname}${port}${pathname}${search}${hash}`;\n  },\n\n  // internal, do not modify\n  _readyToCapture: true,\n\n  _reset() {\n    CD._readyToCapture = true;\n  },\n\n  pause(maxSuspension, msg) {\n    msg = msg || 'manual suspension';\n\n    if (maxSuspension) {\n      msg += `, will end in ${maxSuspension}ms`;\n\n      setTimeout(() => {\n        MICapture.resume(msg);\n      }, maxSuspension);\n    }\n\n    if (typeof MICapture === 'undefined') {\n      CD.log(`paused: ${msg}`);\n    } else {\n      MICapture.pause(msg);\n    }\n  },\n\n  resume(msg) {\n    if (typeof MICapture === 'undefined') {\n      CD.log(`resuming paused capture: ${msg}`);\n    } else {\n      MICapture.resume(msg);\n    }\n  },\n\n  getCORS(url, options = {}, callback = () => {}) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    options.corsCacheTime = options.corsCacheTime || 10 * 1000;\n    if (!/cors.movableink.com/.test(url)) {\n      url = CD.proxyUrl(url);\n    }\n\n    options.headers = options.headers || {};\n    options.headers['x-reverse-proxy-ttl'] = options.corsCacheTime / 1000;\n    options.headers['x-mi-cbe'] = this._hashForRequest(url, options);\n\n    return CD.get(url, options, callback);\n  },\n\n  get(url, options = {}, callback = () => {}) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    const deprecatedCallback = function() {\n      if (callback && typeof callback === 'function') {\n        CD.log(DEPRECATION_MSG);\n        return callback(...arguments);\n      }\n    };\n\n    const msg = `xhr: ${url}`;\n\n    return new Promise(function(resolve, reject) {\n      try {\n        const req = new XMLHttpRequest();\n\n        req.onerror = function() {\n          CD.resume(msg);\n          CD.log(`XHR error for ${url}`);\n\n          deprecatedCallback(null);\n\n          reject({\n            status: this.status,\n            statusText: req.statusText\n          });\n        };\n\n        req.onload = function() {\n          CD.resume(msg);\n\n          const contentType = this.getResponseHeader('content-type');\n          const data = this.responseText;\n          const status = this.status;\n\n          deprecatedCallback(data, status, contentType);\n\n          resolve({\n            contentType,\n            data,\n            status\n          });\n        };\n\n        req.open(options.method || 'GET', url, true);\n\n        req.withCredentials = true;\n\n        if (options.headers) {\n          for (const header in options.headers) {\n            req.setRequestHeader(header, options.headers[header]);\n          }\n        }\n\n        req.send(options.body);\n        CD.pause(options.maxSuspension, msg);\n      } catch (error) {\n        deprecatedCallback(null);\n\n        reject({\n          message: `Cropduster failed to create Promise: ${error}`,\n          error: error\n        });\n      }\n    });\n  },\n\n  getImage(url, options = {}, callback = () => {}) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    const deprecatedCallback = function() {\n      if (callback && typeof callback === 'function') {\n        CD.log(DEPRECATION_MSG);\n\n        return callback(...arguments);\n      }\n    };\n\n    const msg = `getImage: ${url}`;\n\n    return new Promise(function(resolve, reject) {\n      const img = new Image();\n\n      img.onload = function() {\n        CD.resume(msg);\n\n        deprecatedCallback(img);\n\n        resolve(img);\n      };\n\n      img.onerror = function(event) {\n        CD.resume(msg);\n\n        deprecatedCallback(null);\n\n        reject(event);\n      };\n\n      CD.pause(options.maxSuspension, msg);\n      img.src = url;\n    });\n  },\n\n  /**\n   * NOTE: getImages is intended to be used with promises. The `afterAll` callback is\n   * now deprecated, and the order of the afterEach and afterAll arguments has\n   * been reversed since previous versions of cropduster.\n   *\n   * To achieve the same effect, users should pass a single callback into the\n   * arguments for getImages, and then use a `.then` call to handle any actions\n   * after all images have finished loading.\n   *\n   * If any image fails to load, the Promise will reject.\n   */\n  getImages(urls, options = {}, afterEach, afterAll) {\n    const msg = 'getImages:';\n    CD.pause(options.maxSuspension, msg);\n\n    if (typeof options === 'function') {\n      afterAll = afterEach;\n      afterEach = options;\n      options = {};\n    }\n\n    const promises = urls.map(url => {\n      return this.getImage(url, options.maxSuspension).then(img => {\n        if (afterEach) {\n          afterEach(img);\n        }\n\n        return img;\n      });\n    });\n\n    return Promise.all(promises).then(\n      images => {\n        if (afterAll) {\n          CD.log(DEPRECATION_MSG);\n          afterAll(images);\n        }\n\n        CD.resume(msg);\n        return images;\n      },\n      _ => {\n        CD.resume(msg);\n        throw new Error('Not all images loaded successfully');\n      });\n  },\n\n  waitForAsset(assetUrl) {\n    if (typeof MICapture === 'undefined') {\n      CD.log(`Wait for asset: ${assetUrl}`);\n    } else {\n      MICapture.waitForAsset(assetUrl);\n    }\n  },\n\n  log(message) {\n    console.log(message);\n  },\n\n  _hashForRequest(url, options) {\n    const str = `${url}${JSON.stringify(options)}`;\n\n    let hash = 0;\n    if (str.length === 0) return hash;\n\n    for (let i = 0; i < str.length; i++) {\n      hash = ((hash << 5) - hash + str.charCodeAt(i)) & 0xffffffff;\n    }\n\n    return hash.toString();\n  }\n};\n\nexport default CD;\n\n\n\n// WEBPACK FOOTER //\n// ./src/cropduster.js"],"sourceRoot":""}